<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
#div1 {width:200px; height:200px; background:red; filter:alpha(opacity:30); opacity:0.3;}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>div透明度变化</title>
<script src="move.js"></script>
<script type="text/javascript">
window.onload = function()
{
	var objDiv = document.getElementById("div1");
	objDiv.onmousemove = function()
	{
		startMove(objDiv,'opacity',100)
	}
	objDiv.onmouseout = function()
	{
		startMove(objDiv,'opacity',30);
	}
}
/*
function getStyle(obj, attr)
{
	if(obj.currentStyle){
		return obj.currentStyle[attr];
	}else{
		return getComputedStyle(obj,false)[attr];
	}
}

function startMove(obj,attr,target)
{
	clearInterval(obj.timer);
	obj.timer = setInterval(function(){
		//透明度属性做特殊处理
		var current = 0;
		if(attr=='opacity')
		{
			current = parseInt(parseFloat(getStyle(obj,attr))*100);
		}else{
			current = parseInt(getStyle(obj,attr));
		}
		//计算速度
		var speed = (target-current)/8;
		speed = speed>0 ? Math.ceil(speed) : Math.floor(speed);

		//终止条件判断
		if(target==current)
		{
			clearInterval(obj.timer);
		}else{
			//如果是透明度还要做处理
			if(attr=='opacity')
			{
				obj.style.filter = 'alpha(opacity:'+(current+speed)+')';
				obj.style.opacity=(current+speed)/100;
				//查看透明度的变化
				document.getElementById("txt1").value = obj.style.opacity;
			}else{
				obj.style[attr] = current+speed+'px';
			}
		}
	}, 30)
	*/
}
</script>
</head>

<body>
<input id="txt1" type="text"/>
<div id="div1"></div>
</body>
</html>
